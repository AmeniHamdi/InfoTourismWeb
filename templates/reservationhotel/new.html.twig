{% extends 'front.html.twig' %}

{% block title %}New Reservation{% endblock %}

{% block body %}

    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <div class="search_tour">
        <div class="wrap">
            <div class="wrap_float">
                {{ form_start(form, {'attr': {'id': 'form'}}) }}
                <div class="search_tour_form">
                    <h2 class="section_subtitle">
                        SEARCH TOUR
                    </h2>
                    <p class="section_title">
                        Ready to rest? We are ready to help with the search
                    </p>
                    <div class="fields__block">
                        <div class="fields">
                            <div class="field">
                                <div class="label">Date Debut : </div>
                                <div class="field_wrap ">

                                    {{ form_widget(form.datedeb, { 'attr': {'class': 'field_wrap'} }) }}
                                </div>
                                {{ form_errors (form.datedeb) }}
                            </div>
                            <div class="field">
                                <div class="label">Date Fin : </div>
                                <div class="field_wrap ">
                                    {{ form_widget(form.datefin, { 'attr': {'class': 'field_wrap'} }) }}

                                </div>
                            </div>

                            <div class="field">
                                <div class="label">Nombre de Place : </div>
                                <div class="field_wrap ">
                                    {{ form_widget(form.nbrplace, { 'attr': {'class': 'field_wrap'} }) }}
                                </div>
                            </div>
                            <div class="field">
                                <div class="label">Prix : </div>
                                <div class="field_wrap ">
                                    {{ form_widget(form.prix, { 'attr': {'class': 'field_wrap'} }) }}
                                </div>
                            </div>


                        </div>

                    </div>
                    <div class="field">
                        <input type="submit" value="Enregistrer" class="btn btn-success"/>
                    </div>
                </div>
                {{ form_end(form) }}

            </div>
        </div>

    </div>

    <script>
        const form= document.getElementById('form');
        const errorElement= document.getElementById('errorElement');
        var now = new Date();
        form.addEventListener('submit',(e)=> {
            let message = [];

            var date = new Date(document.getElementById('reservation_datedeb').value);


            const year= document.getElementById('reservationhotel_datedeb_year').value;
            const month= document.getElementById('reservationhotel_datedeb_month').value;
            const day= document.getElementById('reservationhotel_datedeb_day').value;
            const yearf= document.getElementById('reservationhotel_datefin_year').value;
            const monthf= document.getElementById('reservationhotel_datefin_month').value;
            const dayf= document.getElementById('reservationhotel_datefin_day').value;

            var dated = new Date(year,month,day)
            var datef = new Date(yearf,monthf,dayf)




            console.log('whyy'+dated)

            console.log(date , ' ', now)
            if((dated < now)|| (dated > datef)){
                swal("ATTENTION !!!","Vérifier votre date ","error" );
                message.push('Vérifier Votre date')
            }
            console.log(message)
            if(message.length> 0){
                e.preventDefault();
                errorElement.innerText = message.join(', ')
            }
        })
    </script>



{% endblock %}
